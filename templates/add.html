{% extends "base.html" %}

{% block title %}Ajouter un Patient - Cabinet MÃ©dical{% endblock %}

{% block content %}
<div class="content-container">
    <div class="page-header">
        <h1>â• Ajouter un Patient</h1>
        <a href="{{ url_for('contacts') }}" class="btn btn-secondary">â† Retour</a>
    </div>
    
    <div class="form-container">
        <form method="POST" action="{{ url_for('add_contact') }}">
            <h3>Informations de Base</h3>
            
            <div class="form-group">
                <label for="categorie">ğŸ“ CatÃ©gorie *</label>
                <select id="categorie" name="categorie" required onchange="updateFormFields()">
                    <option value="Patient" selected>ğŸ‘¤ Patient</option>
                    <option value="DÃ©lÃ©guÃ© MÃ©dical">ğŸ‘¨â€âš•ï¸ DÃ©lÃ©guÃ© MÃ©dical</option>
                    <option value="Pharmacie">ğŸ’Š Pharmacie</option>
                    <option value="Laboratoire">ğŸ”¬ Laboratoire</option>
                    <option value="Assurance">ğŸ›¡ï¸ Assurance</option>
                    <option value="Entreprise">ğŸ¢ Entreprise</option>
                    <option value="Client">ğŸ’¼ Client</option>
                    <option value="Fournisseur">ğŸ“¦ Fournisseur</option>
                    <option value="Partenaire">ğŸ¤ Partenaire</option>
                    <option value="Autre">ğŸ“‹ Autre</option>
                </select>
                <small id="categoryHelp" style="color: #666; display: block; margin-top: 5px;">
                    Informations patient avec dossier mÃ©dical complet
                </small>
            </div>
            
            <div class="form-group">
                <label for="nom"><span id="nomLabel">ğŸ‘¤ Nom Complet</span> *</label>
                <input type="text" id="nom" name="nom" required autofocus placeholder="Nom du contact">
            </div>
            
            <div class="form-group">
                <label for="email">ğŸ“§ Email *</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="telephone">ğŸ“± TÃ©lÃ©phone *</label>
                <input type="tel" id="telephone" name="telephone" required placeholder="+212606060606">
                <small>Format international recommandÃ© pour WhatsApp</small>
            </div>
            
            <hr style="margin: 30px 0;" id="sectionPro">
            
            <h3 id="titlePro">Informations Professionnelles (Optionnel)</h3>
            
            <div class="form-group" id="fieldTitrePoste">
                <label for="titre_poste"><span id="labelTitrePoste">ğŸ’¼ Titre du Poste / Profession</span></label>
                <input type="text" id="titre_poste" name="titre_poste" placeholder="Ex: MÃ©decin, Infirmier, Manager">
            </div>
            
            <div class="form-group" id="fieldEntreprise">
                <label for="entreprise"><span id="labelEntreprise">ğŸ¢ Entreprise</span></label>
                <input type="text" id="entreprise" name="entreprise" placeholder="Nom de l'entreprise">
            </div>
            
            <hr style="margin: 30px 0;">
            
            <h3>Adresse (Optionnel)</h3>
            
            <div class="form-group">
                <label for="adresse">ğŸ  Adresse</label>
                <input type="text" id="adresse" name="adresse" placeholder="NumÃ©ro et rue">
            </div>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 15px;">
                <div class="form-group">
                    <label for="ville">ğŸ™ï¸ Ville</label>
                    <input type="text" id="ville" name="ville">
                </div>
                
                <div class="form-group">
                    <label for="code_postal">ğŸ“® Code Postal</label>
                    <input type="text" id="code_postal" name="code_postal">
                </div>
            </div>
            
            <div class="form-group">
                <label for="pays">ğŸŒ Pays</label>
                <input type="text" id="pays" name="pays" value="Maroc">
            </div>
            
            <hr style="margin: 30px 0;" id="sectionMedical">
            
            <h3 id="titleMedical">Informations MÃ©dicales (Optionnel)</h3>
            
            <div id="medicalFields">
            
            <div class="form-group" id="field_date_naissance">
                <label for="date_naissance"><span id="label_date_naissance">ğŸ‚ Date de Naissance</span></label>
                <input type="text" id="date_naissance" name="date_naissance" placeholder="">
            </div>
            
            <div class="form-group" id="field_groupe_sanguin">
                <label for="groupe_sanguin">ğŸ©¸ Groupe Sanguin</label>
                <select id="groupe_sanguin" name="groupe_sanguin">
                    <option value="">-- SÃ©lectionner --</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                </select>
            </div>
            
            <div class="form-group" id="field_numero_secu">
                <label for="numero_secu"><span id="label_numero_secu">ğŸ”¢ NumÃ©ro de SÃ©curitÃ© Sociale</span></label>
                <input type="text" id="numero_secu" name="numero_secu" maxlength="50" placeholder="">
            </div>
            
            <div class="form-group" id="field_allergies">
                <label for="allergies"><span id="label_allergies">âš ï¸ Allergies</span></label>
                <textarea id="allergies" name="allergies" rows="3" placeholder=""></textarea>
            </div>
            
            <div class="form-group" id="field_notes">
                <label for="notes"><span id="label_notes">ğŸ“ Notes</span></label>
                <textarea id="notes" name="notes" rows="4" placeholder="Informations additionnelles..."></textarea>
            </div>
            
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-success" id="submitBtn">âœ“ Ajouter le Patient</button>
                <a href="{{ url_for('contacts') }}" class="btn btn-secondary">âœ— Annuler</a>
            </div>
        </form>
    </div>
</div>

<script>
function updateFormFields() {
    const categorie = document.getElementById('categorie').value;
    const categoryHelp = document.getElementById('categoryHelp');
    const nomLabel = document.getElementById('nomLabel');
    const titlePro = document.getElementById('titlePro');
    const titleMedical = document.getElementById('titleMedical');
    const submitBtn = document.getElementById('submitBtn');
    const labelTitrePoste = document.getElementById('labelTitrePoste');
    const labelEntreprise = document.getElementById('labelEntreprise');
    const notesField = document.getElementById('notes');
    
    // Show/hide sections
    const sectionMedical = document.getElementById('sectionMedical');
    const sectionPro = document.getElementById('sectionPro');
    const fieldTitrePoste = document.getElementById('fieldTitrePoste');
    const fieldEntreprise = document.getElementById('fieldEntreprise');
    
    // Medical fields
    const medicalFields = ['field_date_naissance', 'field_groupe_sanguin', 'field_numero_secu', 'field_allergies', 'field_notes'];
    
    // Reset all to visible first
    medicalFields.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = 'block';
    });
    sectionMedical.style.display = 'block';
    sectionPro.style.display = 'block';
    
    switch(categorie) {
        case 'Patient':
            categoryHelp.textContent = 'ğŸ‘¤ Informations patient avec dossier mÃ©dical complet';
            nomLabel.innerHTML = 'ğŸ‘¤ Nom du Patient';
            titleMedical.textContent = 'Informations MÃ©dicales (Optionnel)';
            submitBtn.innerHTML = 'âœ“ Ajouter le Patient';
            labelTitrePoste.innerHTML = 'ğŸ’¼ Profession';
            labelEntreprise.innerHTML = 'ğŸ¢ Employeur';
            notesField.placeholder = 'Notes mÃ©dicales, antÃ©cÃ©dents, traitements en cours...';
            break;
            
        case 'DÃ©lÃ©guÃ© MÃ©dical':
            categoryHelp.textContent = 'ğŸ‘¨â€âš•ï¸ DÃ©lÃ©guÃ© mÃ©dical reprÃ©sentant des laboratoires pharmaceutiques';
            nomLabel.innerHTML = 'ğŸ‘¨â€âš•ï¸ Nom du DÃ©lÃ©guÃ©';
            document.getElementById('nom').placeholder = 'Ex: Jean Dupont';
            titlePro.textContent = 'Informations Professionnelles';
            labelTitrePoste.innerHTML = 'ğŸ’¼ Fonction';
            labelEntreprise.innerHTML = 'ğŸ’Š Laboratoire / Entreprise';
            document.getElementById('titre_poste').placeholder = 'Ex: DÃ©lÃ©guÃ© RÃ©gional, ReprÃ©sentant';
            document.getElementById('entreprise').placeholder = 'Ex: Sanofi, Pfizer, Bayer';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations Professionnelles';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Date de visite habituelle
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ“… Jour de visite habituel';
            document.getElementById('date_naissance').type = 'text';
            document.getElementById('date_naissance').placeholder = 'Ex: Lundi, Mardi matin...';
            
            // RÃ©utiliser numero_secu â†’ NÂ° d\'immatriculation
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ“‹ NÂ° Immatriculation';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro d\'identification professionnelle';
            
            // RÃ©utiliser allergies â†’ SpÃ©cialitÃ©s mÃ©dicales
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ’Š SpÃ©cialitÃ©s / Produits';
            document.getElementById('allergies').placeholder = 'Ex: Cardiologie, DiabÃ¨te, Vaccins, MÃ©dicaments gÃ©nÃ©riques';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Zones de couverture, frÃ©quence de visite, contacts privilÃ©giÃ©s...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter le DÃ©lÃ©guÃ© MÃ©dical';
            break;
            
        case 'Pharmacie':
            categoryHelp.textContent = 'ğŸ’Š Pharmacie partenaire pour commandes de mÃ©dicaments';
            nomLabel.innerHTML = 'ğŸ’Š Nom de la Pharmacie';
            document.getElementById('nom').placeholder = 'Ex: Pharmacie Centrale';
            titlePro.textContent = 'Informations Pharmacie (RecommandÃ©)';
            labelTitrePoste.innerHTML = 'ğŸ‘¨â€âš•ï¸ Pharmacien Responsable';
            labelEntreprise.innerHTML = 'ğŸ¢ Enseigne/Groupe';
            document.getElementById('titre_poste').placeholder = 'Nom du pharmacien responsable';
            document.getElementById('entreprise').placeholder = 'Ex: Pharmacie Lafayette, IndÃ©pendant';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations SpÃ©cifiques Pharmacie';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Horaires d'ouverture
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ• Horaires d\'Ouverture';
            document.getElementById('date_naissance').type = 'text';
            document.getElementById('date_naissance').placeholder = 'Ex: Lun-Ven 8h-20h, Sam 9h-18h';
            
            // RÃ©utiliser numero_secu â†’ NÂ° Licence/AgrÃ©ment
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ“œ NÂ° Licence/AgrÃ©ment';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro d\'autorisation officiel';
            
            // RÃ©utiliser allergies â†’ Services disponibles
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ’Š Services Disponibles';
            document.getElementById('allergies').placeholder = 'Ex: Garde 24h, OrthopÃ©die, HomÃ©opathie, MatÃ©riel mÃ©dical';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Informations complÃ©mentaires sur la pharmacie...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter la Pharmacie';
            break;
            
        case 'Laboratoire':
            categoryHelp.textContent = 'ğŸ”¬ Laboratoire d\'analyses mÃ©dicales';
            nomLabel.innerHTML = 'ğŸ”¬ Nom du Laboratoire';
            document.getElementById('nom').placeholder = 'Ex: Laboratoire Bio-SantÃ©';
            titlePro.textContent = 'Informations Laboratoire (RecommandÃ©)';
            labelTitrePoste.innerHTML = 'ğŸ‘¨â€ğŸ”¬ Directeur/Responsable';
            labelEntreprise.innerHTML = 'ğŸ¢ RÃ©seau/Groupe';
            document.getElementById('titre_poste').placeholder = 'Nom du responsable';
            document.getElementById('entreprise').placeholder = 'Ex: Biogroup, Cerba, IndÃ©pendant';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations SpÃ©cifiques Laboratoire';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ DÃ©lai de RÃ©sultats
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'â±ï¸ DÃ©lai de RÃ©sultats';
            document.getElementById('date_naissance').type = 'text';
            document.getElementById('date_naissance').placeholder = 'Ex: 24h pour analyses standard, 48h pour biologie';
            
            // RÃ©utiliser numero_secu â†’ NÂ° d'AccrÃ©ditation
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ… NÂ° d\'AccrÃ©ditation';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro d\'accrÃ©ditation COFRAC ou Ã©quivalent';
            
            // RÃ©utiliser allergies â†’ SpÃ©cialitÃ©s
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ”¬ SpÃ©cialitÃ©s & Analyses';
            document.getElementById('allergies').placeholder = 'Ex: Biochimie, HÃ©matologie, Microbiologie, PCR, Imagerie mÃ©dicale';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Informations complÃ©mentaires, horaires, modalitÃ©s de prÃ©lÃ¨vement...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter le Laboratoire';
            break;
            
        case 'Assurance':
            categoryHelp.textContent = 'ğŸ›¡ï¸ Compagnie d\'assurance santÃ© ou mutuelle';
            nomLabel.innerHTML = 'ğŸ›¡ï¸ Nom de l\'Assurance';
            document.getElementById('nom').placeholder = 'Ex: Mutuelle GÃ©nÃ©rale';
            titlePro.textContent = 'Informations Assurance (RecommandÃ©)';
            labelTitrePoste.innerHTML = 'ğŸ‘” Conseiller/Gestionnaire';
            labelEntreprise.innerHTML = 'ğŸ¢ Organisme';
            document.getElementById('titre_poste').placeholder = 'Votre contact chez l\'assureur';
            document.getElementById('entreprise').placeholder = 'Nom complet de l\'organisme';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations Contrat & Couverture';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Date d'AdhÃ©sion
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ“… Date d\'AdhÃ©sion';
            document.getElementById('date_naissance').type = 'date';
            document.getElementById('date_naissance').placeholder = '';
            
            // RÃ©utiliser numero_secu â†’ NÂ° Police/Contrat
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ“‹ NÂ° Police/Contrat';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro de contrat ou police d\'assurance';
            
            // RÃ©utiliser allergies â†’ Type de Couverture
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ›¡ï¸ Type de Couverture';
            document.getElementById('allergies').placeholder = 'Ex: Hospitalisation, Soins ambulatoires, Dentaire, Optique, MÃ©dicaments (taux %)';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Garanties spÃ©cifiques, exclusions, procÃ©dures de remboursement...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter l\'Assurance';
            break;
            
        case 'Fournisseur':
            categoryHelp.textContent = 'ğŸ“¦ Fournisseur de produits ou services';
            nomLabel.innerHTML = 'ğŸ“¦ Nom du Fournisseur';
            titlePro.textContent = 'Informations Fournisseur';
            labelTitrePoste.innerHTML = 'ğŸ‘” Commercial/Contact';
            labelEntreprise.innerHTML = 'ğŸ¢ SociÃ©tÃ©';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations Commerciales';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Date de Partenariat
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ“… Date de DÃ©but Collaboration';
            document.getElementById('date_naissance').type = 'date';
            document.getElementById('date_naissance').placeholder = '';
            
            // RÃ©utiliser numero_secu â†’ NÂ° RC
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ¢ NÂ° RC';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro d\'identification fiscale';
            
            // RÃ©utiliser allergies â†’ Produits/Services
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ“¦ Produits/Services Fournis';
            document.getElementById('allergies').placeholder = 'Ex: MÃ©dicaments, MatÃ©riel mÃ©dical, Fournitures bureau, Ã‰quipements';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Conditions de paiement, dÃ©lais de livraison, tarifs nÃ©gociÃ©s...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter le Fournisseur';
            break;
            
        case 'Partenaire':
            categoryHelp.textContent = 'ğŸ¤œ Partenaire professionnel';
            nomLabel.innerHTML = 'ğŸ¤œ Nom du Partenaire';
            titlePro.textContent = 'Informations Partenaire';
            labelTitrePoste.innerHTML = 'ğŸ‘” Fonction';
            labelEntreprise.innerHTML = 'ğŸ¢ Organisation';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations Partenariat';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Date de Partenariat
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ“… Date de DÃ©but Partenariat';
            document.getElementById('date_naissance').type = 'date';
            document.getElementById('date_naissance').placeholder = '';
            
            // RÃ©utiliser numero_secu â†’ NÂ° Convention
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ“œ NÂ° Convention/Accord';
            document.getElementById('numero_secu').placeholder = 'RÃ©fÃ©rence de la convention ou accord';
            
            // RÃ©utiliser allergies â†’ Type de Partenariat
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ¤ Type de Partenariat';
            document.getElementById('allergies').placeholder = 'Ex: RÃ©fÃ©rencement mutuel, Co-marketing, Ã‰change de services, R&D';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Termes du partenariat, objectifs communs, engagements...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter le Partenaire';
            break;
            
        case 'Entreprise':
        case 'Client':
            if (categorie === 'Entreprise') {
                categoryHelp.textContent = 'ğŸ¢ Entreprise cliente ou partenaire';
                nomLabel.innerHTML = 'ğŸ¢ Nom de l\'Entreprise';
                submitBtn.innerHTML = 'âœ“ Ajouter l\'Entreprise';
            } else {
                categoryHelp.textContent = 'ğŸ’¼ Client professionnel';
                nomLabel.innerHTML = 'ğŸ’¼ Nom du Client';
                submitBtn.innerHTML = 'âœ“ Ajouter le Client';
            }
            
            titlePro.textContent = 'Informations Professionnelles';
            labelTitrePoste.innerHTML = 'ğŸ‘” Personne de Contact / Poste';
            labelEntreprise.innerHTML = 'ğŸ¢ SociÃ©tÃ©';
            
            // RÃ©utilisation intelligente des champs
            titleMedical.textContent = 'Informations Commerciales';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // RÃ©utiliser date_naissance â†’ Date de DÃ©but Relation
            document.getElementById('field_date_naissance').style.display = 'block';
            document.getElementById('label_date_naissance').innerHTML = 'ğŸ“… Date de DÃ©but Relation';
            document.getElementById('date_naissance').type = 'date';
            document.getElementById('date_naissance').placeholder = '';
            
            // RÃ©utiliser numero_secu â†’ NÂ° SIRET/Client
            document.getElementById('field_numero_secu').style.display = 'block';
            document.getElementById('label_numero_secu').innerHTML = 'ğŸ¢ NÂ° SIRET/Client';
            document.getElementById('numero_secu').placeholder = 'NumÃ©ro d\'identification';
            
            // RÃ©utiliser allergies â†’ Secteur d'ActivitÃ©
            document.getElementById('field_allergies').style.display = 'block';
            document.getElementById('label_allergies').innerHTML = 'ğŸ­ Secteur d\'ActivitÃ©';
            document.getElementById('allergies').placeholder = 'Ex: SantÃ©, Technologie, Commerce, Services, Industrie';
            
            // Notes
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Besoins spÃ©cifiques, historique des transactions, prÃ©fÃ©rences...';
            
            break;
            
        default:
            categoryHelp.textContent = 'ğŸ“‹ Contact gÃ©nÃ©ral';
            nomLabel.innerHTML = 'ğŸ‘¤ Nom du Contact';
            titleMedical.textContent = 'Informations ComplÃ©mentaires';
            sectionMedical.style.display = 'block';
            
            // Masquer groupe sanguin uniquement
            document.getElementById('field_groupe_sanguin').style.display = 'none';
            
            // Garder les autres champs visibles mais simplifiÃ©s
            document.getElementById('field_date_naissance').style.display = 'none';
            document.getElementById('field_numero_secu').style.display = 'none';
            document.getElementById('field_allergies').style.display = 'none';
            document.getElementById('field_notes').style.display = 'block';
            document.getElementById('label_notes').innerHTML = 'ğŸ“ Notes';
            notesField.placeholder = 'Informations additionnelles...';
            
            submitBtn.innerHTML = 'âœ“ Ajouter le Contact';
    }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    updateFormFields();
});
</script>
{% endblock %}
