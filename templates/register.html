{% extends "base.html" %}

{% block title %}Inscription - Cabinet MÃ©dical{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-box">
        {% if is_first_user %}
        <h1>ğŸ” Initialisation du SystÃ¨me</h1>
        <div class="alert alert-info" style="margin-bottom: 20px; padding: 15px; background: #d1ecf1; border-radius: 5px;">
            <strong>Aucun utilisateur trouvÃ©!</strong><br>
            CrÃ©ez le premier <strong>Super Administrateur</strong> pour initialiser le systÃ¨me.
        </div>
        {% else %}
        <h1>ğŸ“ CrÃ©er un Compte Patient</h1>
        <div class="alert alert-info" style="margin-bottom: 20px; padding: 15px; background: #d1ecf1; border-radius: 5px;">
            <strong>ğŸ¥ Patients du Cabinet</strong><br>
            Si vous Ãªtes dÃ©jÃ  enregistrÃ©(e) comme patient, vous pouvez crÃ©er un compte pour accÃ©der Ã  vos informations en ligne.
        </div>
        {% endif %}
        
        <form method="POST" action="{{ url_for('register') }}">
            <div class="form-group">
                <label for="username">ğŸ‘¤ Nom d'utilisateur</label>
                <input type="text" id="username" name="username" required autofocus>
            </div>
            
            <div class="form-group">
                <label for="password">ğŸ”‘ Mot de passe</label>
                <input type="password" id="password" name="password" required minlength="8">
                <small>Minimum 8 caractÃ¨res (sÃ©curitÃ© renforcÃ©e)</small>
            </div>
            
            <div class="form-group">
                <label for="confirm">ğŸ”‘ Confirmer le mot de passe</label>
                <input type="password" id="confirm" name="confirm" required minlength="8">
            </div>
            
            {% if is_first_user %}
            <div class="alert alert-warning" style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
                âš ï¸ <strong>Important:</strong>
                <ul style="margin: 10px 0 0 20px; text-align: left;">
                    <li>Ce compte aura <strong>tous les privilÃ¨ges</strong></li>
                    <li>Choisissez un mot de passe <strong>fort</strong></li>
                    <li>Notez vos identifiants dans un <strong>endroit sÃ»r</strong></li>
                    <li>Vous pourrez crÃ©er d'autres comptes aprÃ¨s connexion</li>
                </ul>
            </div>
            
            <button type="submit" class="btn btn-primary" style="margin-top: 20px;">âœ“ CrÃ©er le Super Administrateur</button>
            {% else %}
            <!-- Section Patient Info (pour auto-inscription) -->
            <hr style="margin: 30px 0;">
            <h3 style="margin-bottom: 15px;">ğŸ¥ VÃ©rification Patient</h3>
            <div class="alert alert-warning" style="margin-bottom: 20px; padding: 15px; background: #fff3cd; border-radius: 5px;">
                âš ï¸ <strong>Informations Requises:</strong><br>
                Pour crÃ©er votre compte, vous devez Ãªtre dÃ©jÃ  enregistrÃ©(e) comme patient dans notre systÃ¨me.
                Entrez vos informations <strong>exactement</strong> comme elles apparaissent dans nos dossiers.
            </div>
            
            <div class="form-group">
                <label for="patient_nom">ğŸ‘¤ Votre Nom Complet *</label>
                <input type="text" id="patient_nom" name="patient_nom" required>
                <small>Tel qu'enregistrÃ© au cabinet (ex: Jean Dupont)</small>
            </div>
            
            <div class="form-group">
                <label for="patient_email">ğŸ“§ Votre Email *</label>
                <input type="email" id="patient_email" name="patient_email" required>
                <small>L'email enregistrÃ© dans votre dossier patient</small>
            </div>
            
            <div class="form-group">
                <label for="patient_telephone">ğŸ“± Votre TÃ©lÃ©phone *</label>
                <input type="tel" id="patient_telephone" name="patient_telephone" required>
                <small>Format: +212606060606 ou 0612345678</small>
            </div>
            
            <div class="alert alert-info" style="margin-top: 20px; padding: 15px; background: #e7f3ff; border-radius: 5px;">
                <strong>â„¹ï¸ Pas encore patient?</strong><br>
                Si vous n'Ãªtes pas encore enregistrÃ©(e) dans notre systÃ¨me, veuillez contacter le cabinet pour prendre rendez-vous.
                Un compte pourra Ãªtre crÃ©Ã© aprÃ¨s votre premiÃ¨re visite.
            </div>
            
            <button type="submit" class="btn btn-primary" style="margin-top: 20px;">âœ“ CrÃ©er mon Compte</button>
            {% endif %}
        </form>
        
        <div class="auth-footer">
            <p>DÃ©jÃ  un compte?</p>
            <a href="{{ url_for('login') }}" class="btn btn-secondary">ğŸ” Se connecter</a>
        </div>
    </div>
</div>
{% endblock %}
